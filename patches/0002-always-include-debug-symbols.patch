From 5c8d460543b0ab2de0ff32e4385abaa1eac50bca Mon Sep 17 00:00:00 2001
From: Hannes Winkler <hanneswinkler2000@web.de>
Date: Thu, 22 Jun 2023 16:30:00 +0000
Subject: [PATCH 2/5] always include debug symbols

Always build with `-ggdb -fdebug-default-version=4` by default.
Symbols are stripped later anyway and they're still useful for debugging.
---
 engine/src/build/config/compiler/BUILD.gn | 6 +++---
 1 file changed, 3 insertions(+), 3 deletions(-)

diff --git a/engine/src/build/config/compiler/BUILD.gn b/engine/src/build/config/compiler/BUILD.gn
index 9a224e12ed..e95830f271 100644
--- a/engine/src/build/config/compiler/BUILD.gn
+++ b/engine/src/build/config/compiler/BUILD.gn
@@ -1023,7 +1023,7 @@ config("symbols") {
       ldflags = [ "-gsource-map" ]
     }
   } else {
-    cflags = [ "-g2" ]
+    cflags = [ "-ggdb", "-fdebug-default-version=4" ]
   }
 }
 
@@ -1032,13 +1032,13 @@ config("minimal_symbols") {
     # Linker symbols for backtraces only.
     ldflags = [ "/DEBUG" ]
   } else {
-    cflags = [ "-g1" ]
+    cflags = [ "-ggdb", "-fdebug-default-version=4" ]
   }
 }
 
 config("no_symbols") {
   if (!is_win) {
-    cflags = [ "-g0" ]
+    cflags = [ "-ggdb", "-fdebug-default-version=4" ]
   }
 }
 
-- 
2.47.1

